{"remainingRequest":"/home/georges/projects/tatutituta/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/georges/projects/tatutituta/app/src/components/Score.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/georges/projects/tatutituta/app/src/components/Score.vue","mtime":1594043683106},{"path":"/home/georges/projects/tatutituta/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/georges/projects/tatutituta/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/georges/projects/tatutituta/app/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/georges/projects/tatutituta/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/georges/projects/tatutituta/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IE9wZW5TaGVldE11c2ljRGlzcGxheSB9IGZyb20gIm9wZW5zaGVldG11c2ljZGlzcGxheSI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWyJzY29yZSIsICJyZWFkeSJdLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvc21kOiBudWxsLAogICAgICBzY29yZUxvYWRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHNjb3JlKHZhbCwgb2xkVmFsKSB7CiAgICAgIGlmICghdmFsIHx8IHZhbCA9PT0gb2xkVmFsKSByZXR1cm47CiAgICAgIHRoaXMubG9hZFNjb3JlKHZhbCk7CiAgICB9CiAgfSwKICBhc3luYyBtb3VudGVkKCkgewogICAgdGhpcy5vc21kID0gbmV3IE9wZW5TaGVldE11c2ljRGlzcGxheSh0aGlzLiRyZWZzLnNjb3JlZGl2LCB7CiAgICAgIGZvbGxvd0N1cnNvcjogdHJ1ZSwKICAgICAgYXV0b1Jlc2l6ZTogZmFsc2UKICAgICAgLy8gYmFja2VuZDogImNhbnZhcyIKICAgIH0pOwogICAgdGhpcy4kZW1pdCgib3NtZEluaXQiLCB0aGlzLm9zbWQpOwogICAgaWYgKHRoaXMuc2NvcmUpIHRoaXMubG9hZFNjb3JlKHRoaXMuc2NvcmUpOwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgbG9hZFNjb3JlKHNjb3JlVXJsKSB7CiAgICAgIHRoaXMuc2NvcmVMb2FkaW5nID0gdHJ1ZTsKICAgICAgbGV0IHNjb3JlWG1sID0gYXdhaXQgYXhpb3MuZ2V0KHNjb3JlVXJsKTsKICAgICAgYXdhaXQgdGhpcy5vc21kLmxvYWQoc2NvcmVYbWwuZGF0YSk7CiAgICAgIHRoaXMuc2NvcmVMb2FkaW5nID0gZmFsc2U7CiAgICAgIGF3YWl0IHRoaXMuJG5leHRUaWNrKCk7CiAgICAgIGF3YWl0IHRoaXMub3NtZC5yZW5kZXIoKTsKICAgICAgdGhpcy4kZW1pdCgic2NvcmVMb2FkZWQiKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Score.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Score.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"score-progress\" v-if=\"scoreLoading || !ready\">\n      <v-progress-circular :size=\"60\" color=\"primary\" indeterminate></v-progress-circular>\n    </div>\n    <div class=\"score\" ref=\"scorediv\" v-show=\"!scoreLoading\" :style=\"{opacity: ready ? 100 : 0}\"></div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { OpenSheetMusicDisplay } from \"opensheetmusicdisplay\";\nexport default {\n  props: [\"score\", \"ready\"],\n  data() {\n    return {\n      osmd: null,\n      scoreLoading: false\n    };\n  },\n  watch: {\n    score(val, oldVal) {\n      if (!val || val === oldVal) return;\n      this.loadScore(val);\n    }\n  },\n  async mounted() {\n    this.osmd = new OpenSheetMusicDisplay(this.$refs.scorediv, {\n      followCursor: true,\n      autoResize: false\n      // backend: \"canvas\"\n    });\n    this.$emit(\"osmdInit\", this.osmd);\n    if (this.score) this.loadScore(this.score);\n  },\n  methods: {\n    async loadScore(scoreUrl) {\n      this.scoreLoading = true;\n      let scoreXml = await axios.get(scoreUrl);\n      await this.osmd.load(scoreXml.data);\n      this.scoreLoading = false;\n      await this.$nextTick();\n      await this.osmd.render();\n      this.$emit(\"scoreLoaded\");\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.score {\n  width: 100%;\n  -webkit-box-shadow: 0px 4px 5px 0px rgba(0, 0, 0, 0.4);\n  -moz-box-shadow: 0px 4px 5px 0px rgba(0, 0, 0, 0.4);\n  box-shadow: 0px 4px 5px 0px rgba(0, 0, 0, 0.4);\n}\n.score-progress {\n  text-align: center;\n}\n</style>\n\n<style lang=\"scss\">\n.score {\n  img {\n    z-index: 1 !important;\n  }\n}\n</style>"]}]}