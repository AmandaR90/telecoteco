{"remainingRequest":"/home/georges/projects/tatutituta/app/node_modules/babel-loader/lib/index.js!/home/georges/projects/tatutituta/app/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/home/georges/projects/tatutituta/app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/georges/projects/tatutituta/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/georges/projects/tatutituta/app/src/components/Score.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/georges/projects/tatutituta/app/src/components/Score.vue","mtime":1594043683106},{"path":"/home/georges/projects/tatutituta/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/georges/projects/tatutituta/app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/georges/projects/tatutituta/app/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/georges/projects/tatutituta/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/georges/projects/tatutituta/app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvZ2Vvcmdlcy9wcm9qZWN0cy90YXR1dGl0dXRhL2FwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IE9wZW5TaGVldE11c2ljRGlzcGxheSB9IGZyb20gIm9wZW5zaGVldG11c2ljZGlzcGxheSI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWyJzY29yZSIsICJyZWFkeSJdLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvc21kOiBudWxsLAogICAgICBzY29yZUxvYWRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHNjb3JlOiBmdW5jdGlvbiBzY29yZSh2YWwsIG9sZFZhbCkgewogICAgICBpZiAoIXZhbCB8fCB2YWwgPT09IG9sZFZhbCkgcmV0dXJuOwogICAgICB0aGlzLmxvYWRTY29yZSh2YWwpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzLm9zbWQgPSBuZXcgT3BlblNoZWV0TXVzaWNEaXNwbGF5KF90aGlzLiRyZWZzLnNjb3JlZGl2LCB7CiAgICAgICAgICAgICAgICBmb2xsb3dDdXJzb3I6IHRydWUsCiAgICAgICAgICAgICAgICBhdXRvUmVzaXplOiBmYWxzZSAvLyBiYWNrZW5kOiAiY2FudmFzIgoKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoIm9zbWRJbml0IiwgX3RoaXMub3NtZCk7CgogICAgICAgICAgICAgIGlmIChfdGhpcy5zY29yZSkgX3RoaXMubG9hZFNjb3JlKF90aGlzLnNjb3JlKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWRTY29yZTogZnVuY3Rpb24gbG9hZFNjb3JlKHNjb3JlVXJsKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHNjb3JlWG1sOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczIuc2NvcmVMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoc2NvcmVVcmwpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBzY29yZVhtbCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5vc21kLmxvYWQoc2NvcmVYbWwuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF90aGlzMi5zY29yZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJG5leHRUaWNrKCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLm9zbWQucmVuZGVyKCk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfdGhpczIuJGVtaXQoInNjb3JlTG9hZGVkIik7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Score.vue"],"names":[],"mappings":";;;;;;;;;;;AAUA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,qBAAA,QAAA,uBAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA,CAAA,OAAA,EAAA,OAAA,CADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,YAAA,EAAA;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,KAAA,EAAA;AACA,IAAA,KADA,iBACA,GADA,EACA,MADA,EACA;AACA,UAAA,CAAA,GAAA,IAAA,GAAA,KAAA,MAAA,EAAA;AACA,WAAA,SAAA,CAAA,GAAA;AACA;AAJA,GARA;AAcA,EAAA,OAdA,qBAcA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,cAAA,KAAA,CAAA,IAAA,GAAA,IAAA,qBAAA,CAAA,KAAA,CAAA,KAAA,CAAA,QAAA,EAAA;AACA,gBAAA,YAAA,EAAA,IADA;AAEA,gBAAA,UAAA,EAAA,KAFA,CAGA;;AAHA,eAAA,CAAA;;AAKA,cAAA,KAAA,CAAA,KAAA,CAAA,UAAA,EAAA,KAAA,CAAA,IAAA;;AACA,kBAAA,KAAA,CAAA,KAAA,EAAA,KAAA,CAAA,SAAA,CAAA,KAAA,CAAA,KAAA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,qBACA,QADA,EACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MAAA,CAAA,YAAA,GAAA,IAAA;AADA;AAAA,uBAEA,KAAA,CAAA,GAAA,CAAA,QAAA,CAFA;;AAAA;AAEA,gBAAA,QAFA;AAAA;AAAA,uBAGA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,IAAA,CAHA;;AAAA;AAIA,gBAAA,MAAA,CAAA,YAAA,GAAA,KAAA;AAJA;AAAA,uBAKA,MAAA,CAAA,SAAA,EALA;;AAAA;AAAA;AAAA,uBAMA,MAAA,CAAA,IAAA,CAAA,MAAA,EANA;;AAAA;AAOA,gBAAA,MAAA,CAAA,KAAA,CAAA,aAAA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AATA;AAvBA,CAAA","sourcesContent":["<template>\n  <div>\n    <div class=\"score-progress\" v-if=\"scoreLoading || !ready\">\n      <v-progress-circular :size=\"60\" color=\"primary\" indeterminate></v-progress-circular>\n    </div>\n    <div class=\"score\" ref=\"scorediv\" v-show=\"!scoreLoading\" :style=\"{opacity: ready ? 100 : 0}\"></div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { OpenSheetMusicDisplay } from \"opensheetmusicdisplay\";\nexport default {\n  props: [\"score\", \"ready\"],\n  data() {\n    return {\n      osmd: null,\n      scoreLoading: false\n    };\n  },\n  watch: {\n    score(val, oldVal) {\n      if (!val || val === oldVal) return;\n      this.loadScore(val);\n    }\n  },\n  async mounted() {\n    this.osmd = new OpenSheetMusicDisplay(this.$refs.scorediv, {\n      followCursor: true,\n      autoResize: false\n      // backend: \"canvas\"\n    });\n    this.$emit(\"osmdInit\", this.osmd);\n    if (this.score) this.loadScore(this.score);\n  },\n  methods: {\n    async loadScore(scoreUrl) {\n      this.scoreLoading = true;\n      let scoreXml = await axios.get(scoreUrl);\n      await this.osmd.load(scoreXml.data);\n      this.scoreLoading = false;\n      await this.$nextTick();\n      await this.osmd.render();\n      this.$emit(\"scoreLoaded\");\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.score {\n  width: 100%;\n  -webkit-box-shadow: 0px 4px 5px 0px rgba(0, 0, 0, 0.4);\n  -moz-box-shadow: 0px 4px 5px 0px rgba(0, 0, 0, 0.4);\n  box-shadow: 0px 4px 5px 0px rgba(0, 0, 0, 0.4);\n}\n.score-progress {\n  text-align: center;\n}\n</style>\n\n<style lang=\"scss\">\n.score {\n  img {\n    z-index: 1 !important;\n  }\n}\n</style>"],"sourceRoot":"src/components"}]}